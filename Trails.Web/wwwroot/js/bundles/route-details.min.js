function drawImportedRoute(n){editableLayers.eachLayer(function(n){editableLayers.removeLayer(n)});isUploadButtonClicked=!0;importedRouteTotalLength=0;minAltitude=0;maxAltitude=0;importedRoutePoints.length=0;yAxisChartData.length=0;xAxisChartData.length=0;altitudes.length=0;let f=L.layerGroup(),i=[];for(let t=0;t<n.length;t++){let r=n[t];i.push(new L.LatLng(r[0],r[1],r[2]));let u=r[2].toFixed(2);altitudes.push(u);n.length<1500?yAxisChartData.push(u):t%250==0&&yAxisChartData.push(u)}minAltitude=Math.min(...altitudes);maxAltitude=Math.max(...altitudes);let r=new L.Polyline(i,{color:"#c700ac",weight:4,smoothFactor:1,fillOpacity:.5});importedRoutePoints=r.getLatLngs().map(n=>[n.lat,n.lng,n.alt]);let t=r.getLatLngs();for(let n=0;n<t.length-1;n++)importedRouteTotalLength+=t[n].distanceTo(t[n+1]);let u=0;for(let n=0;n<t.length-1;n++)u+=t[n].distanceTo(t[n+1]),t.length<1500?xAxisChartData.push(`${(u/1e3).toFixed(2)} km`):n%250==0&&xAxisChartData.push(`${(u/1e3).toFixed(2)} km`);importedRouteTotalLength/=1e3;r.bindPopup(`Event route is ${importedRouteTotalLength.toFixed(2)} kilometers long.`);f.addLayer(r);setupRouteIcons(i[0],i[i.length-1],r,f);let e=document.getElementById("line-chart");e!==null&&(e.style.display="block",new Chart(document.getElementById("line-chart"),{type:"line",data:{labels:xAxisChartData,datasets:[{data:yAxisChartData,label:"Elevation",borderColor:"#fcba03",fill:!0}]},options:{title:{display:!0,text:"Elevation Profile"},scales:{xAxes:[{display:!0}]}}}))}function setupRouteIcons(n,t,i,r){let u=L.icon({iconUrl:"/images/map/startIcon.svg",iconSize:[32,37],iconAnchor:[1,37],popupAnchor:[5,-28]}),f=L.marker(n,{icon:u}).bindPopup("Start Location"),e=L.icon({iconUrl:"/images/map/finishIcon.svg",iconSize:[32,37],iconAnchor:[1,37],popupAnchor:[5,-28]}),o=L.marker(t,{icon:e}).bindPopup("Finish Location");r.addLayer(f);r.addLayer(o);editableLayers.addLayer(r);map.fitBounds(i.getBounds())}let importedRoutePoints=[],importedRouteTotalLength=0,minAltitude=0,maxAltitude=0,altitudes=[],yAxisChartData=[],xAxisChartData=[],isUploadButtonClicked=!1;let center=[42.6194,25.393],map=L.map("map",{fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"},visualClick:!0,visualClickPane:"shadowPane"}).setView(center,7);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="https://osm.org/copyright">OpenStreetMap<\/a> | &copy; <a href="https://opentopomap.org/about">OpenTopoMap<\/a> | &copy; <a href="/">Trails<\/a>'}).addTo(map);let editableLayers=new L.FeatureGroup;map.addLayer(editableLayers);L.control.mousePosition().addTo(map);L.control.scale().addTo(map);L.Control.Watermark=L.Control.extend({onAdd:function(){let n=L.DomUtil.create("img");return n.src="/images/map/watermark.png",n.style.width="130px",n}});L.control.watermark=function(n){return new L.Control.Watermark(n)};L.control.watermark({position:"topright"}).addTo(map);