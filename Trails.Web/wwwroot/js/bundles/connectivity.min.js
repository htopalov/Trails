async function getParticipantsAndBeaconsAsync(){let n=document.getElementById("participants"),t=document.getElementById("beacons"),r=document.getElementById("connectBtn");r&&r.remove();n.length=0;t.length=0;let i=eventsSelect.value;if(i===null||i===""){window.location="/Home/Error";return}showSpinner();await fetch(`/Administration/Admin/GetParticipantsForEvent?eventId=${i}`).then(async i=>{if(hideSpinner(),i.ok){let r=await i.json();if(r.length>0){for(let t=0;t<r.length;t++){let i=document.createElement("option");i.value=r[t].id;i.textContent=r[t].fullName;n.appendChild(i)}n.addEventListener("click",async n=>{n.stopImmediatePropagation(),document.getElementById("connectBtn")&&document.getElementById("connectBtn").remove(),t.length=0,showSpinner(),await fetch("/Administration/Admin/GetBeaconsForEvent").then(async n=>{if(hideSpinner(),n.ok){let i=await n.json();if(i.length>0)for(let n=0;n<i.length;n++){let r=document.createElement("option");r.value=i[n].id;r.textContent=`Imei: ${i[n].imei}`;t.appendChild(r)}}else n.status===400&&(window.location="/Home/Error")}).catch(()=>{hideSpinner(),window.location="/Home/Error"})})}}else i.status===400&&(window.location="/Home/Error")}).catch(()=>{hideSpinner(),window.location="/Home/Error"})}async function connectParticipantToBeaconAsync(n){let t=document.getElementById("participants"),i=document.getElementById("beacons");if(t.value===""||i.value===""){window.location="/Home/Error";return}showSpinner();await fetch("/Administration/Admin/Connectivity",{method:"post",headers:{"Content-Type":"application/json",RequestVerificationToken:`${n}`},body:JSON.stringify({participantId:t.value,beaconId:i.value})}).then(n=>{hideSpinner(),n.ok?(t.remove(t.selectedIndex),i.remove(i.selectedIndex)):n.status===400&&(window.location="/Home/Error")}).catch(()=>{hideSpinner(),window.location.reload()})}